<div class="uploaded-data-wrapper">
  <!-- Section Header -->
  <div class="section-header">
    <h2>Uploaded Data</h2>

    <div class="status-indicators">
      <span class="status-icon success">
        <i class="far fa-check-circle"></i> {{ successCount }}
      </span>
      <span class="status-icon error">
        <i class="far fa-times-circle"></i> {{ errorCount }}
      </span>
      <span class="status-icon pending">
        <i class="far fa-hourglass"></i> {{ warningCount }}
      </span>
    </div>
  </div>

  <!-- Flat Table -->
  <table class="table-main" style="margin-left: -19px; width: 101%;">
    <thead>
      <tr>
        <th>Submodule <span class="sort-icon"></span></th>
        <th>Source System <span class="sort-icon"></span></th>
        <th>Record Count <span class="sort-icon"></span></th>
        <th>File Name</th>
        <th>Uploaded On <span class="sort-icon"></span></th>
        <th>Modified On <span class="sort-icon"></span></th>
        <th>Status <span class="sort-icon"></span></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let file of allFiles">
        <td>{{ file.submodule }}</td>
        <td>{{ file.sourceSystem }}</td>
        <td>{{ file.recordCount | number }}</td>
        <td>{{ file.fileName }}</td>
        <td>{{ file.uploadedOn | date:'dd MMM yyyy' }}</td>
        <td>{{ file.modifiedOn | date:'dd MMM yyyy' }}</td>
        <td>
          <span class="status-badge completed">
            <i class="far fa-thumbs-up"></i> Completed
          </span>
        </td>
        <td>
          <span
            (click)="openArchivePopup(file.fileName); $event.stopPropagation()"
            class="text-black hover:text-gray-600"
            title="Archive">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4">
              </path>
            </svg>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<app-archive-popup
  *ngIf="showPopup"
  [data]="popupData"
  (result)="handlePopupResult($event)">
</app-archive-popup>
